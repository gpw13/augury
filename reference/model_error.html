<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="model_error() calculates modeling error using observed and fitted values from
the data frame. If test_col is provided, the error is only calculated on
observations that were excluded from modeling for test purpose. Otherwise,
the error is calculated for all non-missing values."><title>Get modeling error from a data frame — model_error • augury</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get modeling error from a data frame — model_error"><meta property="og:description" content="model_error() calculates modeling error using observed and fitted values from
the data frame. If test_col is provided, the error is only calculated on
observations that were excluded from modeling for test purpose. Otherwise,
the error is calculated for all non-missing values."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">augury</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/average-trend.html">Average trend modeling</a>
    <a class="dropdown-item" href="../articles/forecast-modeling.html">Forecast modeling</a>
    <a class="dropdown-item" href="../articles/inla-modeling.html">INLA modeling</a>
    <a class="dropdown-item" href="../articles/simple-methods.html">Simple prediction methods</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gpw13/augury/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get modeling error from a data frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/gpw13/augury/blob/HEAD/R/model_error.R" class="external-link"><code>R/model_error.R</code></a></small>
      <div class="d-none name"><code>model_error.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>model_error()</code> calculates modeling error using observed and fitted values from
the data frame. If <code>test_col</code> is provided, the error is only calculated on
observations that were excluded from modeling for test purpose. Otherwise,
the error is calculated for all non-missing values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">model_error</span><span class="op">(</span>
  <span class="va">df</span>,
  <span class="va">response</span>,
  test_col <span class="op">=</span> <span class="cn">NULL</span>,
  test_period <span class="op">=</span> <span class="cn">NULL</span>,
  test_period_flex <span class="op">=</span> <span class="cn">FALSE</span>,
  group_col <span class="op">=</span> <span class="cn">NULL</span>,
  sort_col <span class="op">=</span> <span class="cn">NULL</span>,
  sort_descending <span class="op">=</span> <span class="cn">FALSE</span>,
  pred_col <span class="op">=</span> <span class="st">"pred"</span>,
  pred_upper_col <span class="op">=</span> <span class="st">"pred_upper"</span>,
  pred_lower_col <span class="op">=</span> <span class="st">"pred_lower"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>Data frame of model data.</p></dd>
<dt>response</dt>
<dd><p>Column name of response variable.</p></dd>
<dt>test_col</dt>
<dd><p>Name of logical column specifying which response values to remove
for testing the model's predictive accuracy. If <code>NULL</code>, ignored. See <code>model_error()</code>
for details on the methods and metrics returned.</p></dd>
<dt>test_period</dt>
<dd><p>Length of period to test for RMChE. If <code>NULL</code>, beginning and end
points of each group in <code>group_col</code> are compared. Otherwise, <code>test_period</code> must
be set to an integer <code>n</code> and for each group, comparisons are made between
the end point and <code>n</code> periods prior.</p></dd>
<dt>test_period_flex</dt>
<dd><p>Logical value indicating if <code>test_period</code> is less than
the full length of the series, should change error still be calculated for that
point. Defaults to <code>FALSE</code>.</p></dd>
<dt>group_col</dt>
<dd><p>Column name(s) of group(s) to use in <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code> when
supplying type, calculating mean absolute scaled error on data involving
time series, and if <code>group_models</code>, then fitting and predicting models too.
If <code>NULL</code>, not used. Defaults to <code>"iso3"</code>.</p></dd>
<dt>sort_col</dt>
<dd><p>Column name(s) to use to <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">dplyr::arrange()</a></code> the data prior to
supplying type and calculating mean absolute scaled error on data involving
time series. If <code>NULL</code>, not used. Defaults to <code>"year"</code>.</p></dd>
<dt>sort_descending</dt>
<dd><p>Logical value on whether the sorted values from <code>sort_col</code>
should be sorted in descending order. Defaults to <code>FALSE</code>.</p></dd>
<dt>pred_col</dt>
<dd><p>Column name to store predicted value.</p></dd>
<dt>pred_upper_col</dt>
<dd><p>Column name to store upper bound of confidence interval
generated by the <code>predict_...</code> function. This stores the full set of generated
values for the upper bound.</p></dd>
<dt>pred_lower_col</dt>
<dd><p>Column name to store lower bound of confidence interval
generated by the <code>predict_...</code> function. This stores the full set of generated
values for the lower bound.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named vector of errors: RMSE, MAE, MdAE, MASE, CBA, R2, COR and RMChE.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The error metrics generated from <code>model_error()</code> are the following:</p><ul><li><p><a href="https://en.wikipedia.org/wiki/Root-mean-square_deviation" class="external-link">RMSE</a>: root mean squared error</p></li>
<li><p><a href="https://en.wikipedia.org/wiki/Mean_absolute_error" class="external-link">MAE</a>: mean absolute error</p></li>
<li><p><a href="https://scikit-learn.org/stable/modules/model_evaluation.html#median-absolute-error" class="external-link">MdAE</a>: median absolute error</p></li>
<li><p><a href="https://en.wikipedia.org/wiki/Mean_absolute_scaled_error" class="external-link">MASE</a>: mean absolute scaled error.
Only calculated if <code>test_col</code> is provided, as it is test error scaled by in-sample error.</p></li>
<li><p>CBA: confidence bound accuracy, % of observations lying within the confidence bounds.
Should be very near to 95%. Only calculated if both <code>pred_upper_col</code> and <code>pred_lower_col</code>
are provided.</p></li>
<li><p><a href="https://en.wikipedia.org/wiki/Coefficient_of_determination" class="external-link">R2</a>: R-squared
or coefficient of determination. Calculated only on test values if <code>test_col</code>
is provided. Due to the variety of models available within augury, as well
as the <code>predict_..._avg_trend()</code> functions, adjusted R-squared is not
currently available.</p></li>
<li><p><a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient" class="external-link">COR</a>: Pearson
correlation coefficient of fitted values to observations. Useful as a measure
of general trend matching beyond the point error measurements used above. If
<code>group_col</code> provided, correlation coefficients are calculated within each
group and the average across all groups is returned. Calculated on all data,
but be careful in interpreting when applied to non-time series data.</p></li>
<li><p>RMChE: root mean change error. Since the GPW13 infilling and projections are designed
to estimate change over time, RMChE measures the accuracy of this change. It is
calculated as the difference between observed change between two time periods and
predicted change across those same time periods. If <code>test_period</code> is <code>NULL</code>, this is
the beginning and end of each group from <code>group_col</code>, sorted by <code>sort_col</code>. If
<code>test_period</code> is provided as an integer <code>n</code>, then instead it is calculated comparing
change between the end and <code>n</code> periods prior. <code>test_period_flexibility</code> says
whether or not to calculate the change if the full length of the series is less
than <code>test_period</code>. If <code>TRUE</code>, then it again compares change between the beginning
and end of the series for that group.</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Seth Caldwell, William Msemburi.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

